<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!-- Menú de GURBs mòdul pòlisses -->
        <menuitem id="menu_gurbs" name="Gestió GURB" parent="giscedata_polissa.menu_principal"
            sequence="99" />
        <!-- Llistat per defecte dels GURBs-->
        <record model="ir.ui.view" id="view_gurbs_tree">
            <field name="name">som.gurbs.tree</field>
            <field name="model">som.gurb</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="GURBs">
                    <!-- TODO: Check select fields -->
                    <field name="name" select="1" />
                </tree>
            </field>
        </record>
        <!-- Formulari per defecte dels GURBs -->
        <record model="ir.ui.view" id="view_gurbs_form">
            <field name="name">som.gurb.form</field>
            <field name="model">som.gurb</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="GURB">
                    <!-- TODO: Progress bar -->
                    <group col="6" colspan="4" string="General">
                        <field name="code" select="1" />
                        <field name="type" select="1" />
                        <field name="logo" select="1" />
                        <field name="name" select="1" />
                        <field name="roof_owner" select="1" />
                        <field name="sig_data" select="1" />
                        <field name="address" select="1" />
                        <field name="province" select="1" />
                        <field name="zip_code" select="1" />
                    </group>
                    <group col="6" colspan="4" string="Característiques">
                        <field name="activation_date" select="1" />
                        <field name="first_opening_days" select="1" />
                        <field name="reopening_days" select="1" />
                        <field name="gurb_state" select="1" />
                        <field name="critical_incomplete_state" select="1" />
                        <field name="joining_fee" select="1" />
                        <field name="service_fee" select="1" />
                        <field name="max_power" select="1" />
                        <field name="mix_power" select="1" />
                    </group>
                    <group col="6" colspan="4" string="Autoconsum">
                        <field name="self_consumption_id" />
                        <field name="state" />
                        <field name="generation_power" />
                        <field name="has_compensation" />
                        <field name="data_alta" />
                        <field name="data_baixa" />
                    </group>
                    <notebook colspan="4">
                        <page string="Betes">
                            <!-- TODO -->
                            <separator string="CUPS del GURB" colspan="4"/>
                            <field name="gurb_cups_id" nolabel="1" select="1" colspan="4"/>
                        </page>
                        <page string="Registrador (comptador)">
                            <!-- TODO -->
                        </page>
                        <page string="Observacions">
                            <separator string="Observacions sobre el GURB" colspan="4" />
                            <field name="notes" colspan="4" height="600" nolabel="1" />
                        </page>
                        <page string="Històric">
                            <separator string="Canvis realitzats al GURB" colspan="4" />
                            <field name="history_box" colspan="4" height="600" nolabel="1" />
                        </page>
                    </notebook>
                </form>
            </field>
        </record>
        <!-- Acció per obrir el llistat de GURBs-->
        <record model="ir.actions.act_window" id="action_gurbs">
            <field name="name">GURBs</field>
            <field name="view_id" ref="view_gurbs_tree" />
            <field name="res_model">som.gurb</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <!-- Menú per llistar els GURBs-->
        <menuitem id="menu_llistar_gurbs" parent="menu_gurbs" action="action_gurbs" />
    </data>
</openerp>
